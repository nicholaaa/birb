"use strict";(()=>{var e={};e.id=121,e.ids=[121],e.modules={1029:(e,t,r)=>{r.d(t,{Z:()=>i});let i={src:"/_next/static/media/blank-thumbnail.4c77c2c0.jpg",height:415,width:622,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAoIP/xAAZEAACAwEAAAAAAAAAAAAAAAABEgARE1L/2gAIAQEAAT8AcZKgvqf/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q==",blurWidth:8,blurHeight:5}},971:(e,t,r)=>{r.a(e,async(e,i)=>{try{r.r(t),r.d(t,{config:()=>x,default:()=>c,getServerSideProps:()=>h,getStaticPaths:()=>p,getStaticProps:()=>u,reportWebVitals:()=>g,routeModule:()=>C,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>m});var a=r(7093),s=r(5244),l=r(1323),o=r(5949),n=r(3414),d=r(3674),A=e([o,n,d]);[o,n,d]=A.then?(await A)():A;let c=(0,l.l)(d,"default"),u=(0,l.l)(d,"getStaticProps"),p=(0,l.l)(d,"getStaticPaths"),h=(0,l.l)(d,"getServerSideProps"),x=(0,l.l)(d,"config"),g=(0,l.l)(d,"reportWebVitals"),m=(0,l.l)(d,"unstable_getStaticProps"),j=(0,l.l)(d,"unstable_getStaticPaths"),y=(0,l.l)(d,"unstable_getStaticParams"),b=(0,l.l)(d,"unstable_getServerProps"),v=(0,l.l)(d,"unstable_getServerSideProps"),C=new a.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/add",pathname:"/add",bundlePath:"",filename:""},components:{App:n.default,Document:o.default},userland:d});i()}catch(e){i(e)}})},3025:(e,t,r)=>{r.a(e,async(e,i)=>{try{r.d(t,{G:()=>u,P:()=>p});var a=r(997),s=r(6689),l=r(5675),o=r.n(l),n=r(2210),d=r(3139),A=r(1029),c=e([n,d]);[n,d]=c.then?(await c)():c;let u=({name:e,species:t,family:r,nativity:i,type:l,thumbnail:d})=>{let[c,u]=(0,s.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Box,{w:"100%",textAlign:"center",children:[a.jsx(n.Box,{cursor:"pointer",onClick:()=>u(!0),children:a.jsx(o(),{loader:({src:e})=>e||A.Z,src:d,alt:e,width:"400",height:"225",className:"grid-item-thumbnail",loading:"lazy",style:{objectFit:"cover"}})}),a.jsx(n.Text,{mt:2,fontWeight:"bold",children:e}),(0,a.jsxs)(n.Text,{fontSize:14,children:[r," | ",t]}),a.jsx(n.Badge,{colorScheme:"native"===i?"green":"non-native"===i?"red":"purple",mr:2,children:i}),a.jsx(n.Badge,{colorScheme:"bird"===l?"blue":"pink",children:l})]}),(0,a.jsxs)(n.Modal,{isOpen:c,onClose:()=>u(!1),size:"xl",children:[a.jsx(n.ModalOverlay,{}),(0,a.jsxs)(n.ModalContent,{children:[a.jsx(n.ModalHeader,{children:a.jsx(n.Text,{mt:2,fontWeight:"bold",children:e})}),a.jsx(n.ModalCloseButton,{}),a.jsx(n.ModalBody,{children:a.jsx(o(),{loader:({src:e})=>e||A.Z,src:d,alt:e,width:"800",height:"450",loading:"lazy",style:{objectFit:"cover"}})})]})]})]})},p=()=>a.jsx(d.Global,{styles:`
      .grid-item-thumbnail {
        border-radius: 12px;
        width: 100%;
        height: auto;
        object-fit: cover;
      }
    `});i()}catch(e){i(e)}})},6741:(e,t,r)=>{r.a(e,async(e,i)=>{try{r.d(t,{Z:()=>c});var a=r(997),s=r(6197),l=r(968),o=r.n(l),n=r(3025),d=e([s,n]);[s,n]=d.then?(await d)():d;let A={hidden:{opacity:0,x:0,y:20},enter:{opacity:1,x:0,y:0},exit:{opacity:0,x:-0,y:20}},c=({children:e,title:t})=>{let r=`${t} - Wayne Quah`;return a.jsx(s.motion.article,{initial:"hidden",animate:"enter",exit:"exit",variants:A,transition:{duration:.4,type:"easeInOut"},style:{position:"relative"},children:(0,a.jsxs)(a.Fragment,{children:[t&&a.jsx(o(),{children:a.jsx("title",{children:r})}),e,a.jsx(n.P,{})]})})};i()}catch(e){i(e)}})},3674:(e,t,r)=>{r.a(e,async(e,i)=>{try{r.r(t),r.d(t,{default:()=>u,getServerSideProps:()=>A.N});var a=r(997),s=r(2210),l=r(6741),o=r(6689),n=r(1163),d=r(3535),A=r(2130),c=e([s,l,A]);[s,l,A]=c.then?(await c)():c;let u=()=>{let e=(0,n.useRouter)(),t=(0,s.useToast)();(0,o.useEffect)(()=>{sessionStorage.getItem("auth")||(e.push("/password"),t({title:"403 Forbidden",status:"error",duration:3e3,isClosable:!0}))},[]);let[r,i]=(0,o.useState)(""),A="string"!=typeof r,[c,u]=(0,o.useState)(""),p="string"!=typeof c,[h,x]=(0,o.useState)(""),g="string"!=typeof h,[m,j]=(0,o.useState)("bird"),y=e=>j(e),[b,v]=(0,o.useState)("native"),C=e=>v(e),[f,S]=(0,o.useState)(null),I=async()=>{let e;if(f){let t=await E(f);e=(await P(t)).publicUrl}let{data:t,error:i}=await d.O.from("animals").insert([{name:r,species:c,family:h,nativity:b,type:m,imageUrl:e}]);i?console.log("Error: ",i):console.log(t)},w=async()=>{A||p||g||!r||!c||!h?t({title:"Incomplete",description:"Please fill in all fields",status:"error",duration:3e3,isClosable:!0}):(t({title:"Uploading...",status:"info",duration:3e3,isClosable:!0}),await I(),e.push("/browse"))};async function E(e){let t=`${Date.now()}_${e.name}`,{data:r,error:i}=await d.O.storage.from("images").upload(t,e);return i?(console.error("Error uploading image:",i),null):r.path}async function P(e){let{data:t}=d.O.storage.from("images").getPublicUrl(e);return t}return a.jsx(l.Z,{title:"Add Discovery",children:(0,a.jsxs)(s.Container,{children:[a.jsx(s.Heading,{as:"h1",size:"xl",mt:6,align:"center",children:"Add Discovery"}),a.jsx(s.Divider,{}),a.jsx("br",{}),(0,a.jsxs)(s.FormControl,{isRequired:"true",isInvalid:A,children:[a.jsx(s.FormLabel,{children:"Name"}),a.jsx(s.Input,{type:"string",placeholder:"Name",value:r,onChange:e=>i(e.target.value),autoComplete:"off"})]}),(0,a.jsxs)(s.FormControl,{isRequired:"true",isInvalid:p,children:[a.jsx(s.FormLabel,{children:"Species"}),a.jsx(s.Input,{type:"string",placeholder:"Species",value:c,onChange:e=>u(e.target.value),autoComplete:"off"})]}),(0,a.jsxs)(s.FormControl,{isRequired:"true",isInvalid:g,children:[a.jsx(s.FormLabel,{children:"Family"}),a.jsx(s.Input,{type:"string",placeholder:"Family",value:h,onChange:e=>x(e.target.value),autoComplete:"off"})]}),(0,a.jsxs)(s.FormControl,{children:[a.jsx(s.FormLabel,{as:"legend",children:"Type"}),a.jsx(s.RadioGroup,{defaultValue:"bird",onChange:e=>y(e),children:(0,a.jsxs)(s.HStack,{spacing:"24px",children:[a.jsx(s.Radio,{value:"bird",children:"Bird"}),a.jsx(s.Radio,{value:"reptile",children:"Reptile"})]})})]}),(0,a.jsxs)(s.FormControl,{children:[a.jsx(s.FormLabel,{as:"legend",children:"Nativity"}),a.jsx(s.RadioGroup,{defaultValue:"native",onChange:e=>C(e),children:(0,a.jsxs)(s.HStack,{spacing:"24px",children:[a.jsx(s.Radio,{value:"native",children:"Native"}),a.jsx(s.Radio,{value:"visitor",children:"Visitor"}),a.jsx(s.Radio,{value:"non-native",children:"Non-Native"})]})})]}),(0,a.jsxs)(s.Box,{border:"2px dashed gray",padding:"4",rounded:"md",width:"full",textAlign:"center",marginTop:"20px",children:[a.jsx("input",{type:"file",id:"file-upload",style:{display:"none"},onChange:e=>{let r=e.target.files[0];S(r),console.log(r),t({title:"File uploaded",description:`${e.target.files[0].name} has been selected.`,status:"success",duration:3e3,isClosable:!0})}}),a.jsx("label",{htmlFor:"file-upload",children:a.jsx(s.Button,{as:"span",colorScheme:"teal",children:"Upload File"})}),f&&a.jsx(a.Fragment,{children:(0,a.jsxs)(s.Text,{mt:2,fontSize:"sm",children:["Selected file: ",f.name]})})]}),a.jsx(s.Button,{mt:4,colorScheme:"teal",onClick:w,children:"Add"})]})})};i()}catch(e){i(e)}})},3535:(e,t,r)=>{r.d(t,{O:()=>i});let i=(0,require("@supabase/supabase-js").createClient)("https://rrfvmcjejgxfwraysyzb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJyZnZtY2plamd4ZndyYXlzeXpiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjYzMzIxMDcsImV4cCI6MjA0MTkwODEwN30.IXcQCREcn6JATcg768JIQABiHx3XgOg4IBRCt_A9_2A")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9816:e=>{e.exports=require("styled-jsx/style")},6134:e=>{e.exports=import("@chakra-ui/icons")},2210:e=>{e.exports=import("@chakra-ui/react")},149:e=>{e.exports=import("@chakra-ui/theme-tools")},3139:e=>{e.exports=import("@emotion/react")},4115:e=>{e.exports=import("@emotion/styled")},9752:e=>{e.exports=import("@vercel/analytics/react")},6197:e=>{e.exports=import("framer-motion")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[117,859,664,165,163,492],()=>r(971));module.exports=i})();